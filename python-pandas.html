<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robin Warner, Kevin Nota, and Maxime Borry">

<title>Introduction to Ancient Metagenomics - 8&nbsp; Introduction to Python and Pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./git-github.html" rel="next">
<link href="./r-tidyverse.html" rel="prev">
<link href="./favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Introduction to Ancient Metagenomics - 8&nbsp; Introduction to Python and Pandas">
<meta property="og:description" content="">
<meta property="og:site_name" content="Introduction to Ancient Metagenomics">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./section-useful-skills.html">Useful Skills</a></li><li class="breadcrumb-item"><a href="./python-pandas.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Python and Pandas</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Ancient Metagenomics</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./citing-this-book.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Citing this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./acknowledgements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./before-you-start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Before you Start</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./section-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction-to-ngs-sequencing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to NGS Sequencing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction-to-ancient-dna.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Ancient DNA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction-to-metagenomics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Metagenomics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction-to-microbial-genomics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Microbial Genomics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction-to-evolutionary-biology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Evolutionary Biology</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./section-useful-skills.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful Skills</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bare-bones-bash.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction to the Command Line</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to R and the Tidyverse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python-pandas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Python and Pandas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introduction to Git(Hub)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./section-ancient-metagenomics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ancient Metagenomics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./taxonomic-profiling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Taxonomic Profiling, OTU Tables and Visualisation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functional-profiling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functional Profiling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./denovo-assembly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to <em>de novo</em> Genome Assembly</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./authentication-decontamination.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Authentication and Decontamination</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./section-ancient-genomics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ancient Genomics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./genome-mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Genome Mapping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./phylogenomics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Introduction to Phylogenomics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./section-ancient-metagenomic-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ancient Metagenomic Resources</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing-ancientmetagenomic-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Accessing Ancient Metagenomic Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ancient-metagenomic-pipelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Ancient Metagenomic Pipelines</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Resources</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter-template.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Chapter Template</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">8.1</span> Introduction</a></li>
  <li><a href="#working-in-a-jupyter-environment" id="toc-working-in-a-jupyter-environment" class="nav-link" data-scroll-target="#working-in-a-jupyter-environment"><span class="header-section-number">8.2</span> Working in a jupyter environment</a></li>
  <li><a href="#pandas" id="toc-pandas" class="nav-link" data-scroll-target="#pandas"><span class="header-section-number">8.3</span> Pandas</a>
  <ul class="collapse">
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started"><span class="header-section-number">8.3.1</span> Getting started</a></li>
  <li><a href="#pandas-data-structures" id="toc-pandas-data-structures" class="nav-link" data-scroll-target="#pandas-data-structures"><span class="header-section-number">8.3.2</span> Pandas data structures</a></li>
  </ul></li>
  <li><a href="#reading-data-with-pandas" id="toc-reading-data-with-pandas" class="nav-link" data-scroll-target="#reading-data-with-pandas"><span class="header-section-number">8.4</span> Reading data with Pandas</a></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration"><span class="header-section-number">8.5</span> Data exploration</a>
  <ul class="collapse">
  <li><a href="#columns" id="toc-columns" class="nav-link" data-scroll-target="#columns"><span class="header-section-number">8.5.1</span> Columns</a></li>
  <li><a href="#inspecting-the-dataframe" id="toc-inspecting-the-dataframe" class="nav-link" data-scroll-target="#inspecting-the-dataframe"><span class="header-section-number">8.5.2</span> Inspecting the DataFrame</a></li>
  <li><a href="#accessing-rows-and-columns" id="toc-accessing-rows-and-columns" class="nav-link" data-scroll-target="#accessing-rows-and-columns"><span class="header-section-number">8.5.3</span> Accessing rows and columns</a></li>
  <li><a href="#conditional-subsetting" id="toc-conditional-subsetting" class="nav-link" data-scroll-target="#conditional-subsetting"><span class="header-section-number">8.5.4</span> Conditional subsetting</a></li>
  </ul></li>
  <li><a href="#describing-a-dataframe" id="toc-describing-a-dataframe" class="nav-link" data-scroll-target="#describing-a-dataframe"><span class="header-section-number">8.6</span> Describing a DataFrame</a></li>
  <li><a href="#dealing-with-missing-data" id="toc-dealing-with-missing-data" class="nav-link" data-scroll-target="#dealing-with-missing-data"><span class="header-section-number">8.7</span> Dealing with missing data</a>
  <ul class="collapse">
  <li><a href="#grouping-data" id="toc-grouping-data" class="nav-link" data-scroll-target="#grouping-data"><span class="header-section-number">8.7.1</span> Grouping data</a></li>
  </ul></li>
  <li><a href="#combining-data" id="toc-combining-data" class="nav-link" data-scroll-target="#combining-data"><span class="header-section-number">8.8</span> Combining data</a>
  <ul class="collapse">
  <li><a href="#concatenation" id="toc-concatenation" class="nav-link" data-scroll-target="#concatenation"><span class="header-section-number">8.8.1</span> Concatenation</a></li>
  <li><a href="#merging" id="toc-merging" class="nav-link" data-scroll-target="#merging"><span class="header-section-number">8.8.2</span> Merging</a></li>
  </ul></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization"><span class="header-section-number">8.9</span> Data visualization</a>
  <ul class="collapse">
  <li><a href="#histogram" id="toc-histogram" class="nav-link" data-scroll-target="#histogram"><span class="header-section-number">8.9.1</span> Histogram</a></li>
  <li><a href="#bar-plot" id="toc-bar-plot" class="nav-link" data-scroll-target="#bar-plot"><span class="header-section-number">8.9.2</span> Bar plot</a></li>
  <li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot"><span class="header-section-number">8.9.3</span> Scatter plot</a></li>
  </ul></li>
  <li><a href="#plotnine" id="toc-plotnine" class="nav-link" data-scroll-target="#plotnine"><span class="header-section-number">8.10</span> Plotnine</a></li>
  <li><a href="#optional-clean-up" id="toc-optional-clean-up" class="nav-link" data-scroll-target="#optional-clean-up"><span class="header-section-number">8.11</span> (Optional) clean-up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./section-useful-skills.html">Useful Skills</a></li><li class="breadcrumb-item"><a href="./python-pandas.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Python and Pandas</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Python and Pandas</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Robin Warner, Kevin Nota, and Maxime Borry </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This session is typically ran held in parallel to the Introduction to R and Tidyverse. Participants of the summer schools chose which to attend based on their prior experience. We recommend the <a href="./r-tidyverse.html">introduction to R session</a> if you have no experience with neither R nor Python.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For this chapter’s exercises, if not already performed, you will need to download the chapter’s dataset, decompress the archive, and create and activate the conda environment.</p>
<p>Do this, use <code>wget</code> or right click and save to download this Zenodo archive: <a href="https://doi.org/10.5281/zenodo.8413046">10.5281/zenodo.8413046</a>, and unpack</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> xvf python-pandas.tar.gz </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> python-pandas/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can then create the subsequently activate environment with</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">-f</span> python-pandas.yml</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate python-pandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="introduction" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">8.1</span> Introduction</h2>
<p>Over the last few years, Python has gained popularity thanks to the numerous libraries (packages with pre-written functions) in the field of machine learning, statistical data analysis, and bioinformatics. While a few years ago, it was often necessary to go to R for performing routine data manipulation and analysis tasks, nowadays Python has a vast ecosystem of libraries. Libraries exist for many different file formats that you might encounter in metagenomics, such as fasta, fastq, sam, bam, etc.</p>
<p>This tutorial/walkthrough will provide a short introduction to the most popular libraries for data analysis <a href="https://pandas.pydata.org/">pandas</a>. This library has functions for reading and manipulating tabular data similar to the <code>data.frame()</code> in R together with some basic data plotting codes.</p>
<p>The aim of this walkthrough is to first: get familiar with the Python code syntax and use Jupiter Notebook for executing codes and secondly get a kickstart to utilising the endless possibilities of data analysis in Python that can be applied to your data.</p>
</section>
<section id="working-in-a-jupyter-environment" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="working-in-a-jupyter-environment"><span class="header-section-number">8.2</span> Working in a jupyter environment</h2>
<p>This tutorial run-through is using a <a href="https://jupyter.org">Jupyter Notebook</a> for writing &amp; executing Python code and for annotating.</p>
<p>Jupyter notebooks are convenient and have two types of cells: <strong>Markdown</strong> and <strong>Code</strong>. The <strong>markup cell</strong> syntax is very similar to <strong>R markdown</strong>. The markdown cells are used for annotating, which is important for sharing code with collaborators, reproducibility, and documentation.</p>
<p>To load, please run the following command from within the chapter’s directory.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter</span> notebook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The in the folder tree, navigate to the <code>python-pandas_lecture</code> directory, and then open the <code>student-notebook.ipynb</code>.</p>
<p>You can then follow that notebook, which should mirror the contents of this chapter! Otherwise try making a new notebook within Jupyter <code>File &gt; New &gt; Notebook</code>!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you get stuck on solutions to the tasks in the Jupyter notebook, the answers should be in the corresponding ‘Solutions’ chapter on this page.</p>
</div>
</div>
<p>A few examples are shown below. For a full list of possible syntax <a href="https://www.ibm.com/docs/en/watson-studio-local/1.2.3?topic=notebooks-markdown-jupyter-cheatsheet">click here</a> for a Jupyter Notebook cheat-sheet.</p>
<p>list of <strong>markdown cell</strong> examples:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In many cases, there are multiple possible syntaxes which give the same result. We present only one way in this run-through.</p>
</div>
</div>
<p>Text</p>
<ul>
<li><code>**bold**</code> : <strong>bold</strong></li>
<li><code>*italics*</code> : <em>italics</em></li>
</ul>
<p>Code</p>
<ul>
<li>`inline code` : <code>inline code</code></li>
</ul>
<p>LaTeX maths</p>
<ul>
<li><code>$ x = \frac{\pi}{42} $</code> : <span class="math display">\[ x = \frac{\pi}{42} \]</span></li>
</ul>
<p>url links</p>
<ul>
<li><code>[link](https://www.python.org/)</code><a href="https://www.python.org/">link</a></li>
</ul>
<p>Images</p>
<ul>
<li><code>![](https://www.spaam-community.org/assets/media/SPAAM-Logo-Full-Colour_ShortName.svg)</code> <img src="https://www.spaam-community.org/assets/media/SPAAM-Logo-Full-Colour_ShortName.svg" class="img-fluid"></li>
</ul>
<p><br>
The <strong>code cells</strong> can interpret many different coding languages including Python and Bash. The syntax of the code cells is the same as the syntax of the coding languages, in our case python.</p>
<p>Below are some examples of Python <strong>code cells</strong> with some useful basic python functions:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Python function
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>print()</code> is a python function for printing lines in the terminal <code>print() == echo</code> in bash</p>
</div>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Hello World from Python!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>out -</em> <code>Hello World from Python!</code></p>
<p>But it can also, for example, run bash commands by adding a <em>!</em> at the start of the line.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> echo <span class="st">"Hello World from bash!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>out -</em> <code>Hello World from bash!</code></p>
<p>Stings or numbers can be stored as a variable by using the <em>=</em> sign</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ones a variable is set in one <strong>code cell</strong> they are stored and can be accessed in other downstream <strong>code cells</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also print multiple things together in one <code>print</code> statement such as a number and a string:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The number is"</span>, i, <span class="st">"Wow!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>out -</em> <code>The number is 0 Wow!</code></p>
</section>
<section id="pandas" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="pandas"><span class="header-section-number">8.3</span> Pandas</h2>
<section id="getting-started" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="getting-started"><span class="header-section-number">8.3.1</span> Getting started</h3>
<p>Pandas is a Python library used for data manipulation and analysis.</p>
<p>We can import the library like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We set “pandas” to the alias “pd” because we are lazy and don’t want to write the full word too many times.</p>
</div>
</div>
<p>Now, we can print the current version:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>pd.__version__</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>out -</em> <code>'2.0.1'</code></p>
</section>
<section id="pandas-data-structures" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="pandas-data-structures"><span class="header-section-number">8.3.2</span> Pandas data structures</h3>
<p>The primary data structures in Pandas are <code>Series</code> and <code>DataFrame</code>.</p>
<p>A <code>DataFrame</code> is a table with <strong>columns</strong> and <strong>rows</strong>.</p>
<p>Each <strong>column</strong> has a <em>column name</em> and each <strong>row</strong> has an <em>index</em>.</p>
<p><img src="assets/images/chapters/python-pandas/01_table_dataframe.svg" class="img-fluid"></p>
<p>A single row or column (1 dimensional data) is a <code>Series</code>.</p>
<p><img src="assets/images/chapters/python-pandas/01_table_series.svg" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For a more in detail pandas getting started tutorial <a href="https://pandas.pydata.org/docs/getting_started/index.html#">click here</a></p>
</div>
</div>
</section>
</section>
<section id="reading-data-with-pandas" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="reading-data-with-pandas"><span class="header-section-number">8.4</span> Reading data with Pandas</h2>
<p>Pandas can read in <strong>csv</strong> (comma separated values) files, which are tables in text format.</p>
<p>It’s called <strong>c</strong>sv because each value is separated from the others via a comma, like this:</p>
<pre class="{text}"><code>A,B
5,6
8,4</code></pre>
<em>out -</em>
<table class="dataframe table table-sm table-striped small" style="width:10%;margin-left:auto;margin-right:auto;dataframe">
<tbody><tr>
<th>
</th>
<th>
A
</th>
<th>
B
</th>
</tr>
<tr>
<td>
1
</td>
<td>
2
</td>
<td>
3
</td>
</tr>
<tr>
<td>
2
</td>
<td>
3
</td>
<td>
4
</td>
</tr>
</tbody></table>
<p>Another common tabular separator are <strong>tsv</strong>, where each value is separated by a <strong>tab</strong> <code>\t</code></p>
<pre class="{text}"><code>A\tB
5\t6
8\t4</code></pre>
<blockquote class="blockquote">
<p>Our dataset <code>"all_data.tsv"</code> is tab separated, which Pandas can handle using the <code>sep</code> argument.</p>
</blockquote>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pandas function
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>pd.read_csv()</code> is the pandas function to read in tabular tables. The <code>sep=</code> can be specified argument, <code>sep=,</code> is the default.</p>
</div>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../all_data.tsv"</span>, sep<span class="op">=</span><span class="st">"</span><span class="ch">\t</span><span class="st">"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
4
</th>

<td>
7446
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
62513.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
520
</td>

<td>
42
</td>

<td>
98
</td>

<td>
0
</td>

<td>
42
</td>

<td>
14
</td>

<td>
6
</td>

<td>
4
</td>

<td>
10
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
1749
</th>

<td>
9432
</td>

<td>
1977
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
666666.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
9
</td>

<td>
14
</td>

<td>
18
</td>

<td>
8
</td>

<td>
1
</td>

<td>
12
</td>

<td>
3
</td>

<td>
1
</td>

<td>
3
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1750
</th>

<td>
8372
</td>

<td>
1974
</td>

<td>
Graduation
</td>

<td>
Married
</td>

<td>
34421.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
3
</td>

<td>
7
</td>

<td>
6
</td>

<td>
2
</td>

<td>
9
</td>

<td>
1
</td>

<td>
0
</td>

<td>
2
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1751
</th>

<td>
10870
</td>

<td>
1967
</td>

<td>
Graduation
</td>

<td>
Married
</td>

<td>
61223.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
709
</td>

<td>
43
</td>

<td>
182
</td>

<td>
42
</td>

<td>
118
</td>

<td>
247
</td>

<td>
9
</td>

<td>
3
</td>

<td>
4
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1752
</th>

<td>
7270
</td>

<td>
1981
</td>

<td>
Graduation
</td>

<td>
Divorced
</td>

<td>
56981.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
908
</td>

<td>
48
</td>

<td>
217
</td>

<td>
32
</td>

<td>
12
</td>

<td>
24
</td>

<td>
2
</td>

<td>
3
</td>

<td>
13
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1753
</th>

<td>
8235
</td>

<td>
1956
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
69245.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
428
</td>

<td>
30
</td>

<td>
214
</td>

<td>
80
</td>

<td>
30
</td>

<td>
61
</td>

<td>
6
</td>

<td>
5
</td>

<td>
10
</td>

<td>
3
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>

<p>
1754 rows × 20 columns
</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you are unsure what arguments a function can take, it is possible to get a <em>help documentation</em> using <code>help(pd.read_csv)</code></p>
</div>
</div>
</section>
<section id="data-exploration" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="data-exploration"><span class="header-section-number">8.5</span> Data exploration</h2>
<p>The data is from a customer personality analysis of a company trying to better understand how to modify their product catalogue. Here is the <a href="https://www.kaggle.com/datasets/imakash3011/customer-personality-analysis">link to the original source</a> for more information.</p>
<section id="columns" class="level3" data-number="8.5.1">
<h3 data-number="8.5.1" class="anchored" data-anchor-id="columns"><span class="header-section-number">8.5.1</span> Columns</h3>
<p>The command below prints all the column names.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Index(['ID', 'Year_Birth', 'Education', 'Marital_Status', 'Income', 'Kidhome',
       'Teenhome', 'MntWines', 'MntFruits', 'MntMeatProducts',
       'MntFishProducts', 'MntSweetProducts', 'MntGoldProds',
       'NumWebPurchases', 'NumCatalogPurchases', 'NumStorePurchases',
       'NumWebVisitsMonth', 'Complain', 'Z_CostContact', 'Z_Revenue'],
      dtype='object')</code></pre>
<p>We can also list their respective data types.</p>
<ul>
<li><code>int64</code> are integers</li>
<li><code>float64</code> are floating point numbers, also called <code>double</code> in other languages</li>
<li><code>object</code> are Python objects, which are strings in this case</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>ID                       int64
Year_Birth               int64
Education               object
Marital_Status          object
Income                 float64
Kidhome                  int64
Teenhome                 int64
MntWines                 int64
MntFruits                int64
MntMeatProducts          int64
MntFishProducts          int64
MntSweetProducts         int64
MntGoldProds             int64
NumWebPurchases          int64
NumCatalogPurchases      int64
NumStorePurchases        int64
NumWebVisitsMonth        int64
Complain                 int64
Z_CostContact            int64
Z_Revenue                int64
dtype: object</code></pre>
</section>
<section id="inspecting-the-dataframe" class="level3" data-number="8.5.2">
<h3 data-number="8.5.2" class="anchored" data-anchor-id="inspecting-the-dataframe"><span class="header-section-number">8.5.2</span> Inspecting the DataFrame</h3>
<p>What is the size of our <code>DataFrame</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>(1754, 20)</code></pre>
<p>It has <strong>1754</strong> rows and <strong>20</strong> columns.</p>
<p>Let’s look at the first 5 rows:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
4
</th>

<td>
7446
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
62513.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
520
</td>

<td>
42
</td>

<td>
98
</td>

<td>
0
</td>

<td>
42
</td>

<td>
14
</td>

<td>
6
</td>

<td>
4
</td>

<td>
10
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>
<p>What we can see it that, unlike <strong>R</strong>, <strong>Python</strong> and in extension <strong>Pandas</strong> is 0-indexed instead of 1-indexed.</p>
<details>
<summary>
Question: Can you show how to do the same using bash?
</summary>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> head all_data.tsv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
4
</th>

<td>
7446
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
62513.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
520
</td>

<td>
42
</td>

<td>
98
</td>

<td>
0
</td>

<td>
42
</td>

<td>
14
</td>

<td>
6
</td>

<td>
4
</td>

<td>
10
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
5
</th>

<td>
965
</td>

<td>
1971
</td>

<td>
Graduation
</td>

<td>
Divorced
</td>

<td>
55635.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
235
</td>

<td>
65
</td>

<td>
164
</td>

<td>
50
</td>

<td>
49
</td>

<td>
27
</td>

<td>
7
</td>

<td>
3
</td>

<td>
7
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
6
</th>

<td>
1994
</td>

<td>
1983
</td>

<td>
Graduation
</td>

<td>
Married
</td>

<td>
NaN
</td>

<td>
1
</td>

<td>
0
</td>

<td>
5
</td>

<td>
5
</td>

<td>
6
</td>

<td>
0
</td>

<td>
2
</td>

<td>
1
</td>

<td>
1
</td>

<td>
0
</td>

<td>
2
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
7
</th>

<td>
387
</td>

<td>
1976
</td>

<td>
Basic
</td>

<td>
Married
</td>

<td>
7500.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
6
</td>

<td>
16
</td>

<td>
11
</td>

<td>
11
</td>

<td>
1
</td>

<td>
16
</td>

<td>
2
</td>

<td>
0
</td>

<td>
3
</td>

<td>
8
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
8
</th>

<td>
2125
</td>

<td>
1959
</td>

<td>
Graduation
</td>

<td>
Divorced
</td>

<td>
63033.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
194
</td>

<td>
61
</td>

<td>
480
</td>

<td>
225
</td>

<td>
112
</td>

<td>
30
</td>

<td>
3
</td>

<td>
4
</td>

<td>
8
</td>

<td>
2
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
9
</th>

<td>
8180
</td>

<td>
1952
</td>

<td>
Master
</td>

<td>
Divorced
</td>

<td>
59354.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
233
</td>

<td>
2
</td>

<td>
53
</td>

<td>
3
</td>

<td>
5
</td>

<td>
14
</td>

<td>
6
</td>

<td>
1
</td>

<td>
5
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>
</details>
</section>
<section id="accessing-rows-and-columns" class="level3" data-number="8.5.3">
<h3 data-number="8.5.3" class="anchored" data-anchor-id="accessing-rows-and-columns"><span class="header-section-number">8.5.3</span> Accessing rows and columns</h3>
<p>We can access parts of the data in <code>DataFrames</code> in different ways.</p>
<p>The first method is sub-setting the rows using the index.</p>
<p>This will take only the second row and all columns, producing a <code>Series</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">1</span>, :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>ID                           2174
Year_Birth                   1954
Education              Graduation
Marital_Status             Single
Income                    46344.0
Kidhome                         1
Teenhome                        1
MntWines                       11
MntFruits                       1
MntMeatProducts                 6
MntFishProducts                 2
MntSweetProducts                1
MntGoldProds                    6
NumWebPurchases                 1
NumCatalogPurchases             1
NumStorePurchases               2
NumWebVisitsMonth               5
Complain                        0
Z_CostContact                   3
Z_Revenue                      11
Name: 1, dtype: object</code></pre>
<p>And this will take the second and third row, producing another <code>DataFrame</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">1</span>:<span class="dv">2</span>, :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>
<p>It’s important to understand that almost all operations on <code>DataFrames</code> are not in-place, meaning that we don’t modify the original object and would have to save the results to the same or a new variable to keep the changes.</p>
<p>This, for example will create a new <code>DataFrame</code> of only the “Education” and “Marital_Status” columns.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> df.loc[:, [<span class="st">"Education"</span>, <span class="st">"Marital_Status"</span>]]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
’
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
Graduation
</td>

<td>
Single
</td>

</tr>

<tr>

<th>
1
</th>

<td>
Graduation
</td>

<td>
Single
</td>

</tr>

<tr>

<th>
2
</th>

<td>
Graduation
</td>

<td>
Together
</td>

</tr>

<tr>

<th>
3
</th>

<td>
Graduation
</td>

<td>
Together
</td>

</tr>

<tr>

<th>
4
</th>

<td>
Master
</td>

<td>
Together
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
1749
</th>

<td>
Graduation
</td>

<td>
Together
</td>

</tr>

<tr>

<th>
1750
</th>

<td>
Graduation
</td>

<td>
Married
</td>

</tr>

<tr>

<th>
1751
</th>

<td>
Graduation
</td>

<td>
Married
</td>

</tr>

<tr>

<th>
1752
</th>

<td>
Graduation
</td>

<td>
Divorced
</td>

</tr>

<tr>

<th>
1753
</th>

<td>
Master
</td>

<td>
Together
</td>

</tr>

</tbody>

</table>

<p>
1754 rows × 2 columns
</p>
<p>’</p>
<p>Selecting only one column by name:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Year_Birth"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>0       1957
1       1954
2       1965
3       1984
4       1967
        ... 
1749    1977
1750    1974
1751    1967
1752    1981
1753    1956</code></pre>
<p>We can also remove columns from the <code>DataFrame</code>.</p>
<p>In this case, we want to remove the columns <code>Z_CostContact</code> and <code>Z_Revenue</code> and keep those changes.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(<span class="st">"Z_CostContact"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(<span class="st">"Z_Revenue"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="conditional-subsetting" class="level3" data-number="8.5.4">
<h3 data-number="8.5.4" class="anchored" data-anchor-id="conditional-subsetting"><span class="header-section-number">8.5.4</span> Conditional subsetting</h3>
<p>We can more specifically look at subsets of the data we might be interested in.</p>
<p>This subsetting is a bit weird in the syntax at first but hopefully makes more sense when we go through it step by step.</p>
<p>We can, for example, test each string in the column <code>Education</code> if it is equal to <code>PhD</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>education_is_grad <span class="op">=</span> (df[<span class="st">"Education"</span>] <span class="op">==</span> <span class="st">"Graduation"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>education_is_grad</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>0        True
1        True
2        True
3        True
4       False
        ...  
1749     True
1750     True
1751     True
1752     True
1753    False
Name: Education, Length: 1754, dtype: bool</code></pre>
<p>We can also check for multiple conditions at once:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>two_at_once <span class="op">=</span> (df[<span class="st">"Education"</span>] <span class="op">==</span> <span class="st">"Graduation"</span>) <span class="op">&amp;</span> (df[<span class="st">"Marital_Status"</span>] <span class="op">==</span> <span class="st">"Single"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>two_at_once</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>0        True
1        True
2       False
3       False
4       False
        ...  
1749    False
1750    False
1751    False
1752    False
1753    False
Length: 1754, dtype: bool</code></pre>
<p>This will create a <code>Series</code> of booleans, which can then be used to subset the data to rows where the condition(s) are <strong>True</strong>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df[two_at_once]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
18
</th>

<td>
7892
</td>

<td>
1969
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
18589.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
6
</td>

<td>
4
</td>

<td>
25
</td>

<td>
15
</td>

<td>
12
</td>

<td>
13
</td>

<td>
2
</td>

<td>
1
</td>

<td>
3
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
20
</th>

<td>
5255
</td>

<td>
1986
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
NaN
</td>

<td>
1
</td>

<td>
0
</td>

<td>
5
</td>

<td>
1
</td>

<td>
3
</td>

<td>
3
</td>

<td>
263
</td>

<td>
362
</td>

<td>
27
</td>

<td>
0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
33
</th>

<td>
1371
</td>

<td>
1976
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
79941.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
123
</td>

<td>
164
</td>

<td>
266
</td>

<td>
227
</td>

<td>
30
</td>

<td>
174
</td>

<td>
2
</td>

<td>
4
</td>

<td>
9
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
1720
</th>

<td>
10968
</td>

<td>
1969
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
57731.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
266
</td>

<td>
21
</td>

<td>
300
</td>

<td>
65
</td>

<td>
8
</td>

<td>
44
</td>

<td>
8
</td>

<td>
8
</td>

<td>
6
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1723
</th>

<td>
5959
</td>

<td>
1968
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
35893.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
158
</td>

<td>
0
</td>

<td>
23
</td>

<td>
0
</td>

<td>
0
</td>

<td>
18
</td>

<td>
3
</td>

<td>
1
</td>

<td>
5
</td>

<td>
8
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1743
</th>

<td>
4201
</td>

<td>
1962
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
57967.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
229
</td>

<td>
7
</td>

<td>
137
</td>

<td>
4
</td>

<td>
0
</td>

<td>
91
</td>

<td>
4
</td>

<td>
2
</td>

<td>
8
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1746
</th>

<td>
7004
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
11012.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
24
</td>

<td>
3
</td>

<td>
26
</td>

<td>
7
</td>

<td>
1
</td>

<td>
23
</td>

<td>
3
</td>

<td>
1
</td>

<td>
2
</td>

<td>
9
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1748
</th>

<td>
8080
</td>

<td>
1986
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
26816.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
5
</td>

<td>
1
</td>

<td>
6
</td>

<td>
3
</td>

<td>
4
</td>

<td>
3
</td>

<td>
0
</td>

<td>
0
</td>

<td>
3
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>

<p>
252 rows × 20 columns
</p>
<p>The syntax that seems more complicated and does it in one step without the extra <code>Series</code> is this:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df[(df[<span class="st">"Education"</span>] <span class="op">==</span> <span class="st">"Master"</span>) <span class="op">&amp;</span> (df[<span class="st">"Marital_Status"</span>] <span class="op">==</span> <span class="st">"Single"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
26
</th>

<td>
10738
</td>

<td>
1951
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
49389.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
40
</td>

<td>
0
</td>

<td>
19
</td>

<td>
2
</td>

<td>
1
</td>

<td>
3
</td>

<td>
2
</td>

<td>
0
</td>

<td>
3
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
46
</th>

<td>
6853
</td>

<td>
1982
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
75777.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
712
</td>

<td>
26
</td>

<td>
538
</td>

<td>
69
</td>

<td>
13
</td>

<td>
80
</td>

<td>
3
</td>

<td>
6
</td>

<td>
11
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
76
</th>

<td>
11178
</td>

<td>
1972
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
42394.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
15
</td>

<td>
2
</td>

<td>
10
</td>

<td>
0
</td>

<td>
1
</td>

<td>
4
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
98
</th>

<td>
6205
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
32557.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
34
</td>

<td>
3
</td>

<td>
29
</td>

<td>
0
</td>

<td>
4
</td>

<td>
10
</td>

<td>
2
</td>

<td>
1
</td>

<td>
3
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
110
</th>

<td>
821
</td>

<td>
1992
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
92859.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
962
</td>

<td>
61
</td>

<td>
921
</td>

<td>
52
</td>

<td>
61
</td>

<td>
20
</td>

<td>
5
</td>

<td>
4
</td>

<td>
12
</td>

<td>
2
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
1690
</th>

<td>
3520
</td>

<td>
1990
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
91172.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
162
</td>

<td>
28
</td>

<td>
818
</td>

<td>
0
</td>

<td>
28
</td>

<td>
56
</td>

<td>
4
</td>

<td>
3
</td>

<td>
7
</td>

<td>
3
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1709
</th>

<td>
4418
</td>

<td>
1983
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
89616.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
671
</td>

<td>
47
</td>

<td>
655
</td>

<td>
145
</td>

<td>
111
</td>

<td>
15
</td>

<td>
7
</td>

<td>
5
</td>

<td>
12
</td>

<td>
2
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1714
</th>

<td>
2980
</td>

<td>
1952
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
8820.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
12
</td>

<td>
0
</td>

<td>
13
</td>

<td>
4
</td>

<td>
2
</td>

<td>
4
</td>

<td>
3
</td>

<td>
0
</td>

<td>
3
</td>

<td>
8
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1738
</th>

<td>
7366
</td>

<td>
1982
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
75777.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
712
</td>

<td>
26
</td>

<td>
538
</td>

<td>
69
</td>

<td>
13
</td>

<td>
80
</td>

<td>
3
</td>

<td>
6
</td>

<td>
11
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1747
</th>

<td>
9817
</td>

<td>
1970
</td>

<td>
Master
</td>

<td>
Single
</td>

<td>
44802.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
853
</td>

<td>
10
</td>

<td>
143
</td>

<td>
13
</td>

<td>
10
</td>

<td>
20
</td>

<td>
9
</td>

<td>
4
</td>

<td>
12
</td>

<td>
8
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>

<p>
75 rows × 20 columns
</p>
</section>
</section>
<section id="describing-a-dataframe" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="describing-a-dataframe"><span class="header-section-number">8.6</span> Describing a DataFrame</h2>
<p>Pandas can easily create overview statistics for all numeric columns:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
count
</th>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1735.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.000000
</td>

<td>
1754.0
</td>

<td>
1754.0
</td>

</tr>

<tr>

<th>
mean
</th>

<td>
5584.696123
</td>

<td>
1969.571266
</td>

<td>
51166.578098
</td>

<td>
0.456100
</td>

<td>
0.480616
</td>

<td>
276.072406
</td>

<td>
28.034778
</td>

<td>
166.492018
</td>

<td>
40.517104
</td>

<td>
28.958381
</td>

<td>
47.266819
</td>

<td>
3.990878
</td>

<td>
2.576967
</td>

<td>
5.714937
</td>

<td>
5.332383
</td>

<td>
0.011403
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

<tr>

<th>
std
</th>

<td>
3254.655979
</td>

<td>
11.876614
</td>

<td>
26200.419179
</td>

<td>
0.537854
</td>

<td>
0.536112
</td>

<td>
314.604735
</td>

<td>
41.348883
</td>

<td>
225.561694
</td>

<td>
57.412986
</td>

<td>
42.830660
</td>

<td>
53.885647
</td>

<td>
2.708278
</td>

<td>
2.848335
</td>

<td>
3.231465
</td>

<td>
2.380183
</td>

<td>
0.106202
</td>

<td>
0.0
</td>

<td>
0.0
</td>

</tr>

<tr>

<th>
min
</th>

<td>
0.000000
</td>

<td>
1893.000000
</td>

<td>
1730.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

<tr>

<th>
25%
</th>

<td>
2802.500000
</td>

<td>
1960.000000
</td>

<td>
33574.500000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
19.000000
</td>

<td>
2.000000
</td>

<td>
15.000000
</td>

<td>
3.000000
</td>

<td>
2.000000
</td>

<td>
10.000000
</td>

<td>
2.000000
</td>

<td>
0.000000
</td>

<td>
3.000000
</td>

<td>
3.000000
</td>

<td>
0.000000
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

<tr>

<th>
50%
</th>

<td>
5468.000000
</td>

<td>
1971.000000
</td>

<td>
49912.000000
</td>

<td>
0.000000
</td>

<td>
0.000000
</td>

<td>
160.500000
</td>

<td>
9.000000
</td>

<td>
66.000000
</td>

<td>
13.000000
</td>

<td>
9.000000
</td>

<td>
27.000000
</td>

<td>
3.000000
</td>

<td>
1.000000
</td>

<td>
5.000000
</td>

<td>
6.000000
</td>

<td>
0.000000
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

<tr>

<th>
75%
</th>

<td>
8441.250000
</td>

<td>
1978.000000
</td>

<td>
68130.000000
</td>

<td>
1.000000
</td>

<td>
1.000000
</td>

<td>
454.000000
</td>

<td>
35.000000
</td>

<td>
232.000000
</td>

<td>
53.500000
</td>

<td>
35.000000
</td>

<td>
63.000000
</td>

<td>
6.000000
</td>

<td>
4.000000
</td>

<td>
8.000000
</td>

<td>
7.000000
</td>

<td>
0.000000
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

<tr>

<th>
max
</th>

<td>
11191.000000
</td>

<td>
1996.000000
</td>

<td>
666666.000000
</td>

<td>
2.000000
</td>

<td>
2.000000
</td>

<td>
1492.000000
</td>

<td>
199.000000
</td>

<td>
1725.000000
</td>

<td>
259.000000
</td>

<td>
263.000000
</td>

<td>
362.000000
</td>

<td>
27.000000
</td>

<td>
28.000000
</td>

<td>
13.000000
</td>

<td>
20.000000
</td>

<td>
1.000000
</td>

<td>
3.0
</td>

<td>
11.0
</td>

</tr>

</tbody>

</table>

<p>
8 rows × 18 columns
</p>
<p>You can also directly calculate the relevant statistics on columns you are interested in:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"MntWines"</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>1492</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"Kidhome"</span>, <span class="st">"Teenhome"</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Kidhome     0.456100
Teenhome    0.480616
dtype: float64</code></pre>
<p>For non-numeric columns, you can get the represented values or their counts:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Education"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>array(['Graduation', 'Master', 'Basic', '2n Cycle'], dtype=object)</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Marital_Status"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Marital_Status
Married     672
Together    463
Single      382
Divorced    180
Widow        53
Alone         2
Absurd        2
Name: count, dtype: int64</code></pre>
<div class="callout callout-style-simple callout-tip callout-titled" title="Task">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Subset the <code>DataFrame</code> in two different ways:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Just like with the “PhD” string before, you can subset using integers and <span class="math inline">\(&lt;\)</span>, <span class="math inline">\(&gt;\)</span>, <span class="math inline">\(&lt;=\)</span> and <span class="math inline">\(&gt;=\)</span>.</p>
</div>
</div>
<ul>
<li>One where everybody is born before 1970</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df_before <span class="op">=</span> df[df[<span class="st">"Year_Birth"</span>] <span class="op">&lt;</span> <span class="dv">1970</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li>One where everybody is born in or after 1970</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df_before <span class="op">=</span> df[df[<span class="st">"Year_Birth"</span>] <span class="op">&gt;=</span> <span class="dv">1970</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li>How many people are in the two <code>DataFrames</code>?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"n(before)   ="</span>, df_before.shape[<span class="dv">0</span>])</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"n(after)   ="</span>, df_before.shape[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>n(before)   = 804
n(after)   = 950</code></pre>
</div>
</div>
</div>
<ul>
<li>Do the total number of people sum up to the original <code>DataFrame</code> total?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a> df_before.shape[<span class="dv">0</span>] <span class="op">+</span> df_after.shape[<span class="dv">0</span>] <span class="op">==</span> df.shape[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>True</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"n(sum)      ="</span>, df_before.shape[<span class="dv">0</span>] <span class="op">+</span> df_after.shape[<span class="dv">0</span>])</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"n(expected) ="</span>, df.shape[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>n(sum)      = 1754
n(expected) = 1754</code></pre>
</div>
</div>
</div>
<ul>
<li>How does the mean income of the two groups differ?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"income(before) ="</span>, df_before[<span class="st">"Income"</span>].mean())</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"income(after)  ="</span>, df_after[<span class="st">"Income"</span>].mean())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>income(before) = 55513.38113207547 income(after) = 47490.29255319149</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled" title="Extra Task">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Extra Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Can you find something else that differs a lot between the two groups?</p>
</div>
</div>
</section>
<section id="dealing-with-missing-data" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="dealing-with-missing-data"><span class="header-section-number">8.7</span> Dealing with missing data</h2>
<p>We can check for missing data for each cell like this:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df.isna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
1
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
2
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
3
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
4
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
1749
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
1750
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
1751
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
1752
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

<tr>

<th>
1753
</th>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

<td>
False
</td>

</tr>

</tbody>

</table>

<p>
1754 rows × 20 columns
</p>
<p>By summing over each row, we see how many missing values are in each column.</p>
<p><code>True</code> is treated as <code>1</code> and <code>False</code> as <code>0</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>ID                      0
Year_Birth              0
Education               0
Marital_Status          0
Income                 19
Kidhome                 0
Teenhome                0
MntWines                0
MntFruits               0
MntMeatProducts         0
MntFishProducts         0
MntSweetProducts        0
MntGoldProds            0
NumWebPurchases         0
NumCatalogPurchases     0
NumStorePurchases       0
NumWebVisitsMonth       0
Complain                0
dtype: int64</code></pre>
<p>We don’t really know what a missing value means so we are just going to keep them in the data.</p>
<p>However, we could remove them using <code>df.dropna()</code></p>
<section id="grouping-data" class="level3" data-number="8.7.1">
<h3 data-number="8.7.1" class="anchored" data-anchor-id="grouping-data"><span class="header-section-number">8.7.1</span> Grouping data</h3>
<p>We can group a <code>DataFrame</code> using a categorical column (for example <code>Education</code> or <code>Marital_Status</code>).</p>
<p>This allows us to do perform operations on each group individually.</p>
<p>For example, we could group by <code>Education</code> and calculate the mean <code>Income</code>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df.groupby(by<span class="op">=</span><span class="st">"Education"</span>)[<span class="st">"Income"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Education
2n Cycle      47633.190000
Basic         20306.259259
Graduation    52720.373656
Master        52917.534247
Name: Income, dtype: float6</code></pre>
</section>
</section>
<section id="combining-data" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="combining-data"><span class="header-section-number">8.8</span> Combining data</h2>
<section id="concatenation" class="level3" data-number="8.8.1">
<h3 data-number="8.8.1" class="anchored" data-anchor-id="concatenation"><span class="header-section-number">8.8.1</span> Concatenation</h3>
<p>One way to combine multiple datasets is through <strong>concatenation</strong>, which either combines all columns or rows of multiple <code>DataFrames</code>.</p>
<p>The command to combine two <code>DataFrames</code> by appending all rows is <code>pd.concat([first_dataframe, second_dataframe])</code></p>
<div class="callout callout-style-simple callout-tip callout-titled" title="Task">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Read the <strong>tsv</strong> “phd_data.tsv” as a new <code>DataFrame</code> and name the variable <code>df2</code></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">"../phd_data.tsv"</span>, sep<span class="op">=</span><span class="st">"</span><span class="ch">\t</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ul>
<li>Concatenate the “old” <code>DataFrame</code> <code>df</code> and the new <code>df2</code> and name the concatenated one <code>concat_df</code></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>concat_df <span class="op">=</span> pd.concat([df, df2])</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>concat_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Z_CostContact
</th>

<th>
Z_Revenue
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
4
</th>

<td>
7446
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
62513.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
520
</td>

<td>
42
</td>

<td>
98
</td>

<td>
0
</td>

<td>
42
</td>

<td>
14
</td>

<td>
6
</td>

<td>
4
</td>

<td>
10
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
481
</th>

<td>
11133
</td>

<td>
1973
</td>

<td>
PhD
</td>

<td>
YOLO
</td>

<td>
48432.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
322
</td>

<td>
3
</td>

<td>
50
</td>

<td>
4
</td>

<td>
3
</td>

<td>
42
</td>

<td>
7
</td>

<td>
1
</td>

<td>
6
</td>

<td>
8
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
482
</th>

<td>
9589
</td>

<td>
1948
</td>

<td>
PhD
</td>

<td>
Widow
</td>

<td>
82032.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
332
</td>

<td>
194
</td>

<td>
377
</td>

<td>
149
</td>

<td>
125
</td>

<td>
57
</td>

<td>
4
</td>

<td>
6
</td>

<td>
7
</td>

<td>
1
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
483
</th>

<td>
4286
</td>

<td>
1970
</td>

<td>
PhD
</td>

<td>
Single
</td>

<td>
57642.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
580
</td>

<td>
6
</td>

<td>
58
</td>

<td>
8
</td>

<td>
0
</td>

<td>
27
</td>

<td>
7
</td>

<td>
6
</td>

<td>
6
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
484
</th>

<td>
4001
</td>

<td>
1946
</td>

<td>
PhD
</td>

<td>
Together
</td>

<td>
64014.0
</td>

<td>
2
</td>

<td>
1
</td>

<td>
406
</td>

<td>
0
</td>

<td>
30
</td>

<td>
0
</td>

<td>
0
</td>

<td>
8
</td>

<td>
8
</td>

<td>
2
</td>

<td>
5
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

<tr>

<th>
485
</th>

<td>
9405
</td>

<td>
1954
</td>

<td>
PhD
</td>

<td>
Married
</td>

<td>
52869.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
84
</td>

<td>
3
</td>

<td>
61
</td>

<td>
2
</td>

<td>
1
</td>

<td>
21
</td>

<td>
3
</td>

<td>
1
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

<td>
11
</td>

</tr>

</tbody>

</table>

<p>
2240 rows × 20 columns
</p>
</div>
</div>
</div>
<ul>
<li>Is there anything weird about the new <code>DataFrame</code> and can you fix that?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We previously removed the columns “Z_CostContact” and “Z_Revenue” but they are in the new data again.</p>
<p>We can remove them like before:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>concat_df <span class="op">=</span> concat_df.drop(<span class="st">"Z_CostContact"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>concat_df <span class="op">=</span> concat_df.drop(<span class="st">"Z_Revenue"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>concat_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

</tr>

<tr>

<th>
4
</th>

<td>
7446
</td>

<td>
1967
</td>

<td>
Master
</td>

<td>
Together
</td>

<td>
62513.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
520
</td>

<td>
42
</td>

<td>
98
</td>

<td>
0
</td>

<td>
42
</td>

<td>
14
</td>

<td>
6
</td>

<td>
4
</td>

<td>
10
</td>

<td>
6
</td>

<td>
0
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
481
</th>

<td>
11133
</td>

<td>
1973
</td>

<td>
PhD
</td>

<td>
YOLO
</td>

<td>
48432.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
322
</td>

<td>
3
</td>

<td>
50
</td>

<td>
4
</td>

<td>
3
</td>

<td>
42
</td>

<td>
7
</td>

<td>
1
</td>

<td>
6
</td>

<td>
8
</td>

<td>
0
</td>

</tr>

<tr>

<th>
482
</th>

<td>
9589
</td>

<td>
1948
</td>

<td>
PhD
</td>

<td>
Widow
</td>

<td>
82032.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
332
</td>

<td>
194
</td>

<td>
377
</td>

<td>
149
</td>

<td>
125
</td>

<td>
57
</td>

<td>
4
</td>

<td>
6
</td>

<td>
7
</td>

<td>
1
</td>

<td>
0
</td>

</tr>

<tr>

<th>
483
</th>

<td>
4286
</td>

<td>
1970
</td>

<td>
PhD
</td>

<td>
Single
</td>

<td>
57642.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
580
</td>

<td>
6
</td>

<td>
58
</td>

<td>
8
</td>

<td>
0
</td>

<td>
27
</td>

<td>
7
</td>

<td>
6
</td>

<td>
6
</td>

<td>
4
</td>

<td>
0
</td>

</tr>

<tr>

<th>
484
</th>

<td>
4001
</td>

<td>
1946
</td>

<td>
PhD
</td>

<td>
Together
</td>

<td>
64014.0
</td>

<td>
2
</td>

<td>
1
</td>

<td>
406
</td>

<td>
0
</td>

<td>
30
</td>

<td>
0
</td>

<td>
0
</td>

<td>
8
</td>

<td>
8
</td>

<td>
2
</td>

<td>
5
</td>

<td>
7
</td>

<td>
0
</td>

</tr>

<tr>

<th>
485
</th>

<td>
9405
</td>

<td>
1954
</td>

<td>
PhD
</td>

<td>
Married
</td>

<td>
52869.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
84
</td>

<td>
3
</td>

<td>
61
</td>

<td>
2
</td>

<td>
1
</td>

<td>
21
</td>

<td>
3
</td>

<td>
1
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

</tr>

</tbody>

</table>

<p>
2240 rows × 18 columns
</p>
</div>
</div>
</div>
<ul>
<li>Is there something interesting about the marital status of some people that have a PhD?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>[</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>concat_df[concat_df[<span class="st">"Education"</span>]<span class="op">==</span><span class="st">"PhD"</span>][<span class="st">"Marital_Status"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Marital_Status
Married     192
Together    117
Single       98
Divorced     52
Widow        24
YOLO          2
Alone         1
Name: count, dtype: int64</code></pre>
<p>There’s two people that have “YOLO” as their Marital Status …]</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="merging" class="level3" data-number="8.8.2">
<h3 data-number="8.8.2" class="anchored" data-anchor-id="merging"><span class="header-section-number">8.8.2</span> Merging</h3>
<p>Analysing numbers can be easier than analysing categorial values, like “PhD” and “Master”.</p>
<p>To make our like easier, we might want to have a new column when the Education level is replaced with a number that “ranks” the Education levels by how long it takes.</p>
<p>This information could be stored in a Python <code>Dictionary</code> (Also called Hash Map in other languages), which stores <strong>key</strong> and <strong>value</strong> pairs.</p>
<p>We could store the Education information like this:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>education_dictionary <span class="op">=</span> {</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Basic"</span>: <span class="dv">1</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2n Cycle"</span>: <span class="dv">2</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Graduation"</span>: <span class="dv">3</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Master"</span>: <span class="dv">4</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PhD"</span>: <span class="dv">5</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can now convert this <code>Dictionary</code> to a <code>DataFrame</code>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>education_df <span class="op">=</span> pd.DataFrame.from_dict(education_dictionary, orient<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>education_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
0
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
Basic
</th>

<td>
1
</td>

</tr>

<tr>

<th>
2n Cycle
</th>

<td>
2
</td>

</tr>

<tr>

<th>
Graduation
</th>

<td>
3
</td>

</tr>

<tr>

<th>
Master
</th>

<td>
4
</td>

</tr>

<tr>

<th>
PhD
</th>

<td>
5
</td>

</tr>

</tbody>

</table>
<p>The resulting <code>DataFrame</code> has the Education level as index and the column 0 has the level information.</p>
<p>We can rename the column to “Level”.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>education_df <span class="op">=</span> education_df.rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">"Level"</span>})</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>education_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
Level
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
Basic
</th>

<td>
1
</td>

</tr>

<tr>

<th>
2n Cycle
</th>

<td>
2
</td>

</tr>

<tr>

<th>
Graduation
</th>

<td>
3
</td>

</tr>

<tr>

<th>
Master
</th>

<td>
4
</td>

</tr>

<tr>

<th>
PhD
</th>

<td>
5
</td>

</tr>

</tbody>

</table>
<p>We can now <strong>merge</strong> this new <code>education_df</code> with our previous <code>concat_df</code>.</p>
<p>The left <code>DataFrame</code> is <code>concat_df</code> and we merge on “Education” because that’s where the Eduction information is.</p>
<p>The right one is <code>education_df</code> and the information is in the index.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>merged_df <span class="op">=</span> pd.merge(left<span class="op">=</span>concat_df, right<span class="op">=</span>education_df, left_on<span class="op">=</span><span class="st">"Education"</span>, right_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>merged_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">

<thead>

<tr>

<th>
</th>

<th>
ID
</th>

<th>
Year_Birth
</th>

<th>
Education
</th>

<th>
Marital_Status
</th>

<th>
Income
</th>

<th>
Kidhome
</th>

<th>
Teenhome
</th>

<th>
MntWines
</th>

<th>
MntFruits
</th>

<th>
MntMeatProducts
</th>

<th>
MntFishProducts
</th>

<th>
MntSweetProducts
</th>

<th>
MntGoldProds
</th>

<th>
NumWebPurchases
</th>

<th>
NumCatalogPurchases
</th>

<th>
NumStorePurchases
</th>

<th>
NumWebVisitsMonth
</th>

<th>
Complain
</th>

<th>
Level
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
5524
</td>

<td>
1957
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
58138.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
635
</td>

<td>
88
</td>

<td>
546
</td>

<td>
172
</td>

<td>
88
</td>

<td>
88
</td>

<td>
8
</td>

<td>
10
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
3
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2174
</td>

<td>
1954
</td>

<td>
Graduation
</td>

<td>
Single
</td>

<td>
46344.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
11
</td>

<td>
1
</td>

<td>
6
</td>

<td>
2
</td>

<td>
1
</td>

<td>
6
</td>

<td>
1
</td>

<td>
1
</td>

<td>
2
</td>

<td>
5
</td>

<td>
0
</td>

<td>
3
</td>

</tr>

<tr>

<th>
2
</th>

<td>
4141
</td>

<td>
1965
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
71613.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
426
</td>

<td>
49
</td>

<td>
127
</td>

<td>
111
</td>

<td>
21
</td>

<td>
42
</td>

<td>
8
</td>

<td>
2
</td>

<td>
10
</td>

<td>
4
</td>

<td>
0
</td>

<td>
3
</td>

</tr>

<tr>

<th>
3
</th>

<td>
6182
</td>

<td>
1984
</td>

<td>
Graduation
</td>

<td>
Together
</td>

<td>
26646.0
</td>

<td>
1
</td>

<td>
0
</td>

<td>
11
</td>

<td>
4
</td>

<td>
20
</td>

<td>
10
</td>

<td>
3
</td>

<td>
5
</td>

<td>
2
</td>

<td>
0
</td>

<td>
4
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

</tr>

<tr>

<th>
5
</th>

<td>
965
</td>

<td>
1971
</td>

<td>
Graduation
</td>

<td>
Divorced
</td>

<td>
55635.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
235
</td>

<td>
65
</td>

<td>
164
</td>

<td>
50
</td>

<td>
49
</td>

<td>
27
</td>

<td>
7
</td>

<td>
3
</td>

<td>
7
</td>

<td>
6
</td>

<td>
0
</td>

<td>
3
</td>

</tr>

<tr>

<th>
…
</th>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

<td>
…
</td>

</tr>

<tr>

<th>
481
</th>

<td>
11133
</td>

<td>
1973
</td>

<td>
PhD
</td>

<td>
YOLO
</td>

<td>
48432.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
322
</td>

<td>
3
</td>

<td>
50
</td>

<td>
4
</td>

<td>
3
</td>

<td>
42
</td>

<td>
7
</td>

<td>
1
</td>

<td>
6
</td>

<td>
8
</td>

<td>
0
</td>

<td>
5
</td>

</tr>

<tr>

<th>
482
</th>

<td>
9589
</td>

<td>
1948
</td>

<td>
PhD
</td>

<td>
Widow
</td>

<td>
82032.0
</td>

<td>
0
</td>

<td>
0
</td>

<td>
332
</td>

<td>
194
</td>

<td>
377
</td>

<td>
149
</td>

<td>
125
</td>

<td>
57
</td>

<td>
4
</td>

<td>
6
</td>

<td>
7
</td>

<td>
1
</td>

<td>
0
</td>

<td>
5
</td>

</tr>

<tr>

<th>
483
</th>

<td>
4286
</td>

<td>
1970
</td>

<td>
PhD
</td>

<td>
Single
</td>

<td>
57642.0
</td>

<td>
0
</td>

<td>
1
</td>

<td>
580
</td>

<td>
6
</td>

<td>
58
</td>

<td>
8
</td>

<td>
0
</td>

<td>
27
</td>

<td>
7
</td>

<td>
6
</td>

<td>
6
</td>

<td>
4
</td>

<td>
0
</td>

<td>
5
</td>

</tr>

<tr>

<th>
484
</th>

<td>
4001
</td>

<td>
1946
</td>

<td>
PhD
</td>

<td>
Together
</td>

<td>
64014.0
</td>

<td>
2
</td>

<td>
1
</td>

<td>
406
</td>

<td>
0
</td>

<td>
30
</td>

<td>
0
</td>

<td>
0
</td>

<td>
8
</td>

<td>
8
</td>

<td>
2
</td>

<td>
5
</td>

<td>
7
</td>

<td>
0
</td>

<td>
5
</td>

</tr>

<tr>

<th>
485
</th>

<td>
9405
</td>

<td>
1954
</td>

<td>
PhD
</td>

<td>
Married
</td>

<td>
52869.0
</td>

<td>
1
</td>

<td>
1
</td>

<td>
84
</td>

<td>
3
</td>

<td>
61
</td>

<td>
2
</td>

<td>
1
</td>

<td>
21
</td>

<td>
3
</td>

<td>
1
</td>

<td>
4
</td>

<td>
7
</td>

<td>
0
</td>

<td>
5
</td>

</tr>

</tbody>

</table>

<p>
2240 rows × 19 columns
</p>
</section>
</section>
<section id="data-visualization" class="level2" data-number="8.9">
<h2 data-number="8.9" class="anchored" data-anchor-id="data-visualization"><span class="header-section-number">8.9</span> Data visualization</h2>
<p>We can easily create simple graphs using <code>DataFrame.plot()</code>.</p>
<p>This uses the package <strong>matplotlib</strong> in the background, which is a very powerful and popular plotting library but is not the most user friendly.</p>
<p>Using this <strong>Pandas</strong> method is very easy and can be a good way to do some initial exploratory plots and later refine them using either pure <strong>matplobib</strong> or another library.</p>
<section id="histogram" class="level3" data-number="8.9.1">
<h3 data-number="8.9.1" class="anchored" data-anchor-id="histogram"><span class="header-section-number">8.9.1</span> Histogram</h3>
<p>We can plot the data from a <code>DataFrame</code> like this:</p>
<p><code>kind</code> specifies the kind of plot (for example <em>hist</em> for histogram, <em>bar</em> for bar graph or <em>scatter</em> for scatter plot).</p>
<p>We usually specify the columns from which the <code>x</code> and <code>y</code> components should be taken, but for a histogram we only need to specify one.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> merged_df.plot(kind<span class="op">=</span><span class="st">"hist"</span>, y<span class="op">=</span><span class="st">"Income"</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Income"</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Histogram of income"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Text(0.5, 1.0, ‘Histogram of income’)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/histogram.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-tip callout-titled" title="Task">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>This doesn’t look very good because the x-axis extends so much!</p>
<ul>
<li>Looking at the data, can you figure out what might cause this?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When we look at the highest earners, we see that somebody put <em>666666</em> as their income.</p>
<p>We can assume that this was put as a joke or is an outlier.</p>
<p>In either way, we can redo the plot with that datapoint removed.</p>
</div>
</div>
</div>
<ul>
<li>Can you “fix” the plot?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> merged_df[merged_df[<span class="st">"Income"</span>] <span class="op">!=</span> <span class="dv">666666</span>].plot(kind<span class="op">=</span><span class="st">"hist"</span>,y<span class="op">=</span><span class="st">"Income"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Income"</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Fixed Histogram of income"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Text(0.5, 1.0, ‘Fixed Histogram of income’)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/fixed_histogram.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="bar-plot" class="level3" data-number="8.9.2">
<h3 data-number="8.9.2" class="anchored" data-anchor-id="bar-plot"><span class="header-section-number">8.9.2</span> Bar plot</h3>
<p>Another visualization we could do is a bar plot.</p>
<p>Using the <code>groupby</code> and <code>mean</code> methods, we can calculate the mean Income like we’ve learned before.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>grouped_by_education <span class="op">=</span> merged_df.groupby(by<span class="op">=</span><span class="st">"Education"</span>)[<span class="st">"Income"</span>].mean()</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>grouped_by_education</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Education
2n Cycle      47633.190000
Basic         20306.259259
Graduation    52720.373656
Master        52917.534247
PhD           56145.313929
Name: Income, dtype: float64</code></pre>
<p>Now, this data can be shown:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> grouped_by_education.plot(kind<span class="op">=</span><span class="st">"bar"</span>)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Mean income"</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Mean income for each education level"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Text(0.5, 1.0, ‘Mean income for each education level’)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/bar_plot.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
</section>
<section id="scatter-plot" class="level3" data-number="8.9.3">
<h3 data-number="8.9.3" class="anchored" data-anchor-id="scatter-plot"><span class="header-section-number">8.9.3</span> Scatter plot</h3>
<p>Another kind of plot is the scatter plot, which needs two columns for the <strong>x</strong> and <strong>y</strong> axis.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> df.plot(kind<span class="op">=</span><span class="st">"scatter"</span>, x<span class="op">=</span><span class="st">"MntWines"</span>, y<span class="op">=</span><span class="st">"MntFruits"</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Wine purchases and Fruit purchases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Text(0.5, 1.0, ‘Wine purchases and Fruit purchases’)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/scatter_polt_01.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
<p>You can also specify whether the axes should be on the log scale or not.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> df.plot(kind<span class="op">=</span><span class="st">"scatter"</span>, x<span class="op">=</span><span class="st">"MntWines"</span>, y<span class="op">=</span><span class="st">"MntFruits"</span>, logy<span class="op">=</span><span class="va">True</span>, logx<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Wine purchases and Fruit purchases, on log scale"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Text(0.5, 1.0, ‘Wine purchases and Fruit purchases, on log scale’)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/scatter_polt_02.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
</section>
</section>
<section id="plotnine" class="level2" data-number="8.10">
<h2 data-number="8.10" class="anchored" data-anchor-id="plotnine"><span class="header-section-number">8.10</span> Plotnine</h2>
<p>Plotnine is the Python clone of ggplot2, which is very powerful and is great if you are already familiar with the ggplot2 syntax!</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>(ggplot(merged_df, aes(<span class="st">"Education"</span>, <span class="st">"MntWines"</span>, fill<span class="op">=</span><span class="st">"Education"</span>))</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a> <span class="op">+</span> geom_boxplot(alpha<span class="op">=</span><span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/boxplot.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>(ggplot(merged_df[(merged_df[<span class="st">"Year_Birth"</span>]<span class="op">&gt;</span><span class="dv">1900</span>) <span class="op">&amp;</span> (merged_df[<span class="st">"Income"</span>]<span class="op">!=</span><span class="dv">666666</span>)],</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>        aes(<span class="st">"Year_Birth"</span>, <span class="st">"Income"</span>, fill<span class="op">=</span><span class="st">"Education"</span>))</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a> <span class="op">+</span> geom_point(alpha<span class="op">=</span><span class="fl">0.5</span>, stroke<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a> <span class="op">+</span> facet_wrap(<span class="st">"Marital_Status"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/Kevinnota/teaching_stuff/blob/main/facet_scatter.png?raw=true" class="img-fluid figure-img"></p>
<figcaption>png</figcaption>
</figure>
</div>
<p><strong>task</strong></p>
<p>Now that you are familiar with python, pandas, and plotting. There are two data.tables from <strong>AncientMetagenomeDir</strong> which contains metadata from metagenomes. You should, by using the code in the tutorial be able to explore the datasets and make some fancy plots.</p>
<pre><code>file names:
sample_table_url
library_table_url</code></pre>
</section>
<section id="optional-clean-up" class="level2" data-number="8.11">
<h2 data-number="8.11" class="anchored" data-anchor-id="optional-clean-up"><span class="header-section-number">8.11</span> (Optional) clean-up</h2>
<p>Let’s clean up your working directory by removing all the data and output from this chapter.</p>
<p>When closing your <code>jupyter</code> notebook(s), say no to saving any additional files.</p>
<p>Press <kbd>ctrl</kbd> + <kbd>c</kbd> on your terminal, and type <kbd>y</kbd> when requested. Once completed, the command below will remove the <code>/&lt;PATH&gt;/&lt;TO&gt;/python-pandas</code> directory <strong>as well as all of its contents</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pro Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Always be VERY careful when using <code>rm -r</code>. Check 3x that the path you are specifying is exactly what you want to delete and nothing more before pressing ENTER!</p>
</div>
</div>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> /<span class="op">&lt;</span>PATH<span class="op">&gt;</span>/<span class="op">&lt;</span>TO<span class="op">&gt;</span>/python-pandas<span class="pp">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Once deleted you can move elsewhere (e.g.&nbsp;<code>cd ~</code>).</p>
<p>We can also get out of the <code>conda</code> environment with</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> deactivate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To delete the conda environment</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> remove <span class="at">--name</span> python-pandas <span class="at">--all</span> <span class="at">-y</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/spaam-community\.github\.org\/intro-to-ancient-metagenomics-book");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./r-tidyverse.html" class="pagination-link" aria-label="Introduction to R and the Tidyverse">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to R and the Tidyverse</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./git-github.html" class="pagination-link" aria-label="Introduction to Git(Hub)">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introduction to Git(Hub)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© 2023 SPAAM Community &amp; Authors with ❤️. Available under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a>. Source material <a href="https://github.com/SPAAM-community/intro-to-ancient-metagenomics-book">here</a>.</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>